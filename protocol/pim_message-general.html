
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">

<meta name="DC.Title" content="PIM报文通用格式">
<meta name="DC.Relation" scheme="URI" content="../message/pim_message.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="bgp_message_format_12">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<title>PIM报文通用格式</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="bgp_message_format_12"></a><a name="bgp_message_format_12"></a>


<h1 class="topictitle1">PIM报文通用格式</h1>

<div>
<p>PIM（Protocol Independent Multicast）称为协议无关组播，作为一种组播路由解决方案，也可以支持IPv4和IPv6网络，在实践中得到广泛的应用。</p>

<p>PIM通过路由器之间交互PIM控制消息实现组播路由功能。PIM控制消息使用IP报文封装。</p>

<div class="fignone"><span class="figcap"><b>图1 </b>PIM消息的封装格式</span>

<br><span><img src="image/pim-format-encap.png"></span></div>

<ul><li>IP报文头的协议类型字段值为103，用来标识数据部分封装了PIM消息。</li><li>IP报文头的目的地址字段用来标识该PIM消息的目的接收者。可以是单播地址，也可以是组播地址。</li><li>PIM-DM协议与PIM-SM协议，支持不同的控制消息。</li></ul>

<div class="section"><h4 class="sectiontitle">PIM消息通用头部格式</h4><p>所有的PIM控制消息头部有相同的格式，如下图：</p>
<div class="fignone"><span class="figcap"><b>图2 </b>PIM消息头部格式</span>

<br><span><img src="image/pim-format-header.png"></span></div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" align="center" valign="top" width="7.852571737093675%" id="mcps1.2.5.4.1.4.1.1">字段</th>

<th class="cellrowborder" align="center" valign="top" width="6.666349070236449%" id="mcps1.2.5.4.1.4.1.2">长度</th>

<th class="cellrowborder" align="center" valign="top" width="85.48107919266987%" id="mcps1.2.5.4.1.4.1.3">说明</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" align="left" valign="top" width="7.852571737093675%" headers="mcps1.2.5.4.1.4.1.1 ">Version</td>

<td class="cellrowborder" align="left" valign="top" width="6.666349070236449%" headers="mcps1.2.5.4.1.4.1.2 ">4比特</td>

<td class="cellrowborder" align="left" valign="top" width="85.48107919266987%" headers="mcps1.2.5.4.1.4.1.3 ">PIM版本，值为2。</td>

</tr>

<tr>
<td class="cellrowborder" align="left" valign="top" width="7.852571737093675%" headers="mcps1.2.5.4.1.4.1.1 ">Type</td>

<td class="cellrowborder" align="left" valign="top" width="6.666349070236449%" headers="mcps1.2.5.4.1.4.1.2 ">4比特</td>

<td class="cellrowborder" align="left" valign="top" width="85.48107919266987%" headers="mcps1.2.5.4.1.4.1.3 ">消息类型，取值如下：<ul><li>0：Hello（PIM-DM与PIM-SM都适用）</li><li>1：Register（只适用于PIM-SM）</li><li>2：Register-Stop（只适用于PIM-SM）</li><li>3：Join/Prune（PIM-DM与PIM-SM都适用）</li><li>4：Bootstrap（只适用于PIM-SM）</li><li>5：Assert（PIM-DM与PIM-SM都适用）</li><li>6：Graft（只适用于PIM-DM）</li><li>7：Graft-Ack（只适用于PIM-DM）</li><li>8：Candidate-RP-Advertisement（只适用于PIM-SM）</li><li>9：State Refresh（只适用于PIM-DM）</li></ul>
</td>

</tr>

<tr>
<td class="cellrowborder" align="left" valign="top" width="7.852571737093675%" headers="mcps1.2.5.4.1.4.1.1 ">Reserved</td>

<td class="cellrowborder" align="left" valign="top" width="6.666349070236449%" headers="mcps1.2.5.4.1.4.1.2 ">8比特</td>

<td class="cellrowborder" align="left" valign="top" width="85.48107919266987%" headers="mcps1.2.5.4.1.4.1.3 ">保留。</td>

</tr>

<tr>
<td class="cellrowborder" align="left" valign="top" width="7.852571737093675%" headers="mcps1.2.5.4.1.4.1.1 ">Checksum</td>

<td class="cellrowborder" align="left" valign="top" width="6.666349070236449%" headers="mcps1.2.5.4.1.4.1.2 ">16比特</td>

<td class="cellrowborder" align="left" valign="top" width="85.48107919266987%" headers="mcps1.2.5.4.1.4.1.3 ">校验和。</td>

</tr>

</tbody>

</table>
</div>
</div>

<div class="section"><h4 class="sectiontitle">参考标准</h4>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="18%" id="mcps1.2.6.2.1.3.1.1">标准</th>

<th class="cellrowborder" valign="top" width="82%" id="mcps1.2.6.2.1.3.1.2">描述</th>

</tr>

</thead>

<tbody>
<tr>

<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.6.2.1.3.1.1 ">RFC 4601</td>

<td class="cellrowborder" valign="top" width="82%" headers="mcps1.2.6.2.1.3.1.2 ">Protocol Independent Multicast - Sparse Mode (PIM-SM):Protocol
Specification (Revised)</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.6.2.1.3.1.1 ">RFC 3973</td>

<td class="cellrowborder" valign="top" width="82%" headers="mcps1.2.6.2.1.3.1.2 ">Protocol Independent Multicast - Dense Mode （PIM-DM）:Protocol
Specification (Revised)</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.6.2.1.3.1.1 ">RFC 4607</td>

<td class="cellrowborder" valign="top" width="82%" headers="mcps1.2.6.2.1.3.1.2 ">Source-Specific Multicast for IP</td>

</tr>

</tbody>

</table>
</div>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="pim_message.html">PIM报文格式</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">本资料收集于互联网</div><div class="hwcopyright">2016 &copy</div></body>
</html>