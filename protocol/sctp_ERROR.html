
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">

<meta name="DC.Title" content="SCTP ERROR数据块格式">
<meta name="abstract" content="">
<meta name="description" content="">
<meta name="DC.Relation" scheme="URI" content="../message/sctp.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="icmp_message_format_31">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<title>SCTP ERROR数据块格式</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="icmp_message_format_31"></a><a name="icmp_message_format_31"></a>


<h1 class="topictitle1">SCTP ERROR数据块格式</h1>


<div><p></p>

<div class="section"><h4 class="sectiontitle">操作差错(ERROR)数据块的格式</h4><p>SCTP端点发送该数据块向其对端点通知一些特定的差错情况。该数据块中可以包含一个或多个差错原因。一般操作差错不一定被看作是致命的，致命差错情况的报告一般使用ABORT数据块。</p>
<div class="fignone"><span class="figcap"><b>图1 </b>SCTP ERROR数据块的格式</span>

<br><span><img src="image/sctp-format-general-ERROR.png"></span></div>
<ul><li>数据块标志位(8bit)：在发送方设置为全0，并在接收方忽略。</li><li>可变长度(16bit无符号整数)：设置为该数据块的字节数，包括数据块头和所有包含的差错原因字段的长度。</li><li>差错原因：可变长度的参数。<div class="fignone"><span class="figcap"><b>图2 </b>SCTP ERROR 差错参数格式</span>

<br><span><img src="image/sctp-format-general-ERROR-parameter.png"></span>
</div>
<ul><li><p>原因编码 (16bit无符号整数)：</p>
<p>定义了被报告的差错情况的类型。</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="16%" id="mcps1.3.1.4.3.2.1.3.1.3.1.1">原因编码</th>

<th class="cellrowborder" valign="top" width="84%" id="mcps1.3.1.4.3.2.1.3.1.3.1.2">描述</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">1</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">无效的流标识符</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">2</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">丢失必备参数</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">3</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">过期的Cookie差错</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">4</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">资源耗尽</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">5</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">无法解析的地址</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">6</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">不识别的数据块类型</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">7</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">无效的必备参数</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">8</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">不识别的参数</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">9</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">无用户数据</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">10</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">关闭阶段收到COOKIE</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.1 ">11</td>

<td class="cellrowborder" valign="top" width="84%" headers="mcps1.3.1.4.3.2.1.3.1.3.1.2 ">使用新的地址重新启动偶联</td>

</tr>

</tbody>

</table>
</div>
</li><li>原因长度(16bit无符号整数)：设置为该参数的字节数，包括原因编码、原因长度和原因特定的信息字段。</li><li>原因特定的信息：可变长度，该字段用来携带差错的详细情况。
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="4.973821989528796%" id="mcps1.3.1.4.3.2.3.1.1.4.1.1">原因编码</th>

<th class="cellrowborder" valign="top" width="18.32460732984293%" id="mcps1.3.1.4.3.2.3.1.1.4.1.2">含义</th>

<th class="cellrowborder" valign="top" width="76.70157068062828%" id="mcps1.3.1.4.3.2.3.1.1.4.1.3">字段格式</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">1</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">无效的流标识符</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>差错原因无效的流识别符用来指示端点收到了一个关于不存在的流的DATA数据块。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code1.png"></span></p>
<ul><li>流识别符：(16bit无符号整数)：包含了接收购差错的DATA数据块的流标识符。</li><li>备用字段(16bit)：由发送方设为全0，在接收方忽略。</li></ul>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">2</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">丢失必备参数</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>丢失必备参数差错原因用来指示一个或多个必备的参数在收到的INIT或INIT ACK数据块中丢失。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code2.png"></span></p>
<ul><li>丢失的参数个数(32bit无符号整数)：该字段用来指示丢失的参数个数。</li><li>丢失的参数类型(16bit无符号整数)：每个字段都应包含丢失的必备参数号。</li></ul>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">3</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">过期的Cookie差错</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>过期的COOKIE差错原因参数用来指示收到的有效的State Cookie已经过期了。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code3.png"></span></p>
<ul><li><p>过期测量(32bit无符号整数)：该字段包含了当前时间和State Cookie过期时的时间差值(用毫秒表示)。该差错原因的发送方可以通过在该字段中包含一个非0的值来报告State
Cookie过期了多长时间。如果发送方不希望提供这个信息，则该字段设置为0。</p>
</li></ul>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">4</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">资源耗尽</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>资源耗尽差错原因用来指示发送方的资源已经耗尽，通常情况下该查错原因与ABORT数据块一起发送。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code4.png"></span></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">5</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">不可解析的地址</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>U不可解析的地址用来指示发送方不能解析特定的地址参数(即发送方不支持该类地址类型)，通常情况下该查错原因与ABORT数据块一起发送。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code5.png"></span></p>
<ul><li>不可解析的地址：可变长度，不可解析的地址字段中包括不能解析的完整的地址参数或主机名参数(类型、长度和地址值)。</li></ul>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">6</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">不识别的数据块类型</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>如果接收方不理解数据块且数据块类型比特中的高位比特设为1，则把不识别的数据块类型错误返回给数据块的产生者</p>
<p><span><img src="image/sctp-format-general-ERROR-Code6.png"></span></p>
<ul><li>不识别的数据块(可变长度)：该字段包含SCTP分组中不识别数据块的数据块类型、数据块标志和数据块长度。</li></ul>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">7</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">无效的必备参数</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>当一个必备参数被设置成无效值时，则向INIT或INITACK的生成者返回无效的必备参数差错。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code7.png"></span></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">8</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">不识别的参数</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>如果接收方不能识别INIT ACK数据块中一个或多个任选参数，则向INIT ACK数据块的产生者返回不识别的参数的差错原因。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code8.png"></span></p>
<ul><li>不识别的参数：可变长度，该参数字段包含了从INIT ACK数据块中复制的完整的不识别的参数。当COOKIE ECHO数据块的发送者希望报告不识别的参数时，这个参数通常是包含在ERROR数据块中与COOKIE
ECHO数据块捆绑在一起发送作为对INIT ACK的响应。</li></ul>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">9</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">无用户数据</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>如果收到的DATA数据块中未包含用户数据，则把这个差错原因返回给DATA数据块的产生者。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code9.png"></span></p>
<ul><li>TSN的值(32bit无符号整数)：该字段包含接收到的这个没有用户数据的DATA数据块的TSN。这个原因值通常是在ABORT数据块中返回的。</li></ul>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">10</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">关闭期间收到Cookie</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>当端点处于SHUTDOWN-ACK-SENT状态时，又收到COOKIE ECHO时则发送该差错原因。返回这个差错原因的ERROR数据块通常与重发的SHUTDOWN
ACK数据块捆绑在一起发送。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code10.png"></span></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="4.973821989528796%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.1 ">11</td>

<td class="cellrowborder" valign="top" width="18.32460732984293%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.2 ">使用新地址重新启动偶联</td>

<td class="cellrowborder" valign="top" width="76.70157068062828%" headers="mcps1.3.1.4.3.2.3.1.1.4.1.3 "><p>当在现存的偶联上收到了COOKIE ECHO数据块，而COOKIE ECHO数据块又向该偶联中增加了先前没有的地址，此时使用该错误原因，并把新增加的地址作为差错信息在该参数中传送，这个差错原因通常都在ABORT中发送，用来拒绝COOKIE
ECHO数据块。</p>
<p><span><img src="image/sctp-format-general-ERROR-Code11.png"></span></p>
</td>

</tr>

</tbody>

</table>
</div>
</li></ul>
</li></ul>
</div>

<div class="section"><h4 class="sectiontitle">参考标准</h4>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="18%" id="mcps1.3.2.2.1.3.1.1">标准</th>

<th class="cellrowborder" valign="top" width="82%" id="mcps1.3.2.2.1.3.1.2">描述</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" width="18%" headers="mcps1.3.2.2.1.3.1.1 ">RFC 2960</td>

<td class="cellrowborder" valign="top" width="82%" headers="mcps1.3.2.2.1.3.1.2 ">Stream Control Transmission Protocol</td>

</tr>

</tbody>

</table>
</div>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="sctp.html" title="">SCTP报文格式</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">本资料收集于互联网</div><div class="hwcopyright">2016 &copy</div></body>
</html>