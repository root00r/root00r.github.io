
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">

<meta name="DC.Title" content="1588v2 Management消息">
<meta name="DC.Relation" scheme="URI" content="../message/1588v2_message.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="eth_13">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<title>1588v2 Management消息</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="eth_13"></a><a name="eth_13"></a>


<h1 class="topictitle1">1588v2 Management消息</h1>

<div>
<div class="section"><h4 class="sectiontitle">报文格式</h4><div class="fignone"><span class="figcap"><b>图1 </b>Management消息格式</span>

<br><span><img src="image/1588v2_PTP_format_Management.png"></span></div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all">
<thead align="left">
<tr>

<th class="cellrowborder" valign="top" width="9.03010033444816%" id="mcps1.2.1.3.1.4.1.1">字段</th>

<th class="cellrowborder" valign="top" width="9.698996655518394%" id="mcps1.2.1.3.1.4.1.2">长度</th>

<th class="cellrowborder" valign="top" width="81.27090301003345%" id="mcps1.2.1.3.1.4.1.3">含义</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">TranSpec</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">4 bits</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">传送相关。<ul><li>0表示PTP消息由1588协议使用</li><li>1表示PTP消息由802.1as协议使用</li></ul>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">MsgType</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">4 bits</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">消息类型值。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">Reserved</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">4 bits</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">保留字段。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">VerPTP</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">4 bits</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">表示1588协议的版本。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">MsgLength</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">2 bytes</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">PTP消息的长度，即PTP消息的全部字节数目。计入字节始于报头的第一个字节，同时包含并收尾于任何尾标的最后一个字节，或是无尾标成员时收尾于消息的最后一个字节。</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">DomainNumber</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">1 byte</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">域编号，表示发送该消息时钟所属的域。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">Reserved</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">1 byte</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">保留字段。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">FlagField</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">2 bytes</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">标志域。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">CorrectionField</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">64 bits</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">修正域，各报文都有，主要用在Sync报文中，用于补偿网络中的传输时延，E2E的频率同步。</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">Reserved</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">32 bits</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">保留字段。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">SourcePortIdentity</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">&nbsp;</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">源端口标识符，发送该消息时钟的ID和端口号。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">SequenceID</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">2 bytes</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">序列号ID，表示消息的序列号，以及关联消息的对应关系。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">ControlField</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">1 byte</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">控制域，由消息类型决定。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">LogMsgInterval</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">1 byte</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">录入消息周期，PTP消息的发送时间间隔。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">targetPortIdentity</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">10 bytes</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">管理消息产生动作节点或端口的portIdentity。通过targetPortIdentity标识的端口不一定是接收到该管理消息的端口。在时钟发送管理消息到管理者的情况下，targetPortIdentity字段应该被设置为它所响应的管理消息的sourcePortIdentity。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">startingBoundaryHops</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">1 byte</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 "><p>用于那些不是用来响应从另外的管理消息请求而发起的消息，startingBoundaryHops的值应该是从请求消息中的startingBoundaryHops和boundaryHops字段计算出来的，值为startingBoundaryHops减去boundaryHops。</p>
<p>当接收到管理消息时，这个差异的绝对值指示该消息经过边界时钟重新发送的次数。</p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">boundaryHops</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">1 byte</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">指示边界时钟接收消息，该管理剩余的连续重新转发次数。当第一次由初始的时钟发送时，boundaryHops的值应该和startingBoundaryHops字段中的值相同。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">reserved</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">1 byte</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">预留。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">actionField</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">1 byte</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">指示对接收到消息将采取的动作。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">reserved</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">1 byte</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 ">预留。</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="9.03010033444816%" headers="mcps1.2.1.3.1.4.1.1 ">managementTLV</td>

<td class="cellrowborder" valign="top" width="9.698996655518394%" headers="mcps1.2.1.3.1.4.1.2 ">M bytes</td>

<td class="cellrowborder" valign="top" width="81.27090301003345%" headers="mcps1.2.1.3.1.4.1.3 "><p>管理消息要求以0或一个TLV结尾。</p>
<p>管理TLV的格式：</p>
<span><img src="image/1588v2_PTP_format_ManagementTLV.png"></span><ul><li>tlvType (Enumeration16): tlvType的值要求为MANAGEMENT。</li><li>lengthField (UInteger16): lengthField的值是2+N，这里的N是一个偶数。</li><li>managementId (Enumeration16): managementId的实现特定范围由制造商来分配，定义他们自有设备独有的管理功能。不期望互联互通能力，并且用户必须保证这些TLV送往到合适的设备。<ul><li>0000 &#8211; 1FFF: 对所有节点适用。</li><li>2000 &#8211; 3FFF: 适用普通时钟和边界时钟。</li><li>4000 to 5FFF: 适用于透明时钟。</li><li>6000 &#8211; 7FFF: 适用普通，边界和透明时钟。</li><li>C000 &#8211; DFFF: 本范围的值用来实现特定的标识。</li><li>E000 &#8211; FFFE: 本范围的值由备选的PTP模板来分配。</li><li>FFFF: 保留。</li></ul>
</li></ul>
</td>

</tr>

</tbody>

</table>
</div>
</div>

<div class="section"><h4 class="sectiontitle">参考标准</h4>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="18%" id="mcps1.2.2.2.1.3.1.1">标准</th>

<th class="cellrowborder" valign="top" width="82%" id="mcps1.2.2.2.1.3.1.2">描述</th>

</tr>

</thead>

<tbody>
<tr>

<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.2.2.1.3.1.1 ">IEEE 1588 V2</td>

<td class="cellrowborder" valign="top" width="82%" headers="mcps1.2.2.2.1.3.1.2 ">Precision Clock Synchronization Protocol for Networked Measurement
and Control Systems</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.2.2.1.3.1.1 ">IEEE P1588&#8482; D2.2</td>

<td class="cellrowborder" valign="top" width="82%" headers="mcps1.2.2.2.1.3.1.2 ">Draft Standard for a Precision Clock Synchronization Protocol
for Networked Measurement and Control Systems</td>

</tr>

</tbody>

</table>
</div>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="1588v2_message.html">1588v2（PTP）报文格式</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">本资料收集于互联网</div><div class="hwcopyright">2016 &copy</div></body>
</html>