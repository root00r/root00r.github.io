
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">

<meta name="DC.Title" content="BGP报文头基本格式（RFC4271）">
<meta name="DC.Relation" scheme="URI" content="../message/bgp_message.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="rrpp_message_format_19">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<title>BGP报文头基本格式（RFC4271）</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="rrpp_message_format_19"></a><a name="rrpp_message_format_19"></a>


<h1 class="topictitle1">BGP报文头基本格式（RFC4271）</h1>

<div>
<div class="section"><h4 class="sectiontitle">报文格式</h4><p>BGP报文由BGP报文头和具体报文内容两部分组成。（RFC4271）</p>
<p>BGP的运行是通过消息驱动的，共有5种消息类型，这些消息有相同的报文头。这些消息通过TCP协议进行传播（端口号是179）。消息最长为4096字节，最短为19字节（只包含报文头）。</p>
<p>BGP报文头包括三的部分，总长19字节。各个部分的格式和功能如下：（RFC4271）</p>
<div class="fignone"><span class="figcap"><b>图1 </b>BGP报文头格式</span>

<br><span><img src="image/bgp-format-general.png"></span></div>
<ul><li><strong>Marker：</strong>占16字节，用于检查BGP对等体的同步信息是否完整，以及用于BGP验证的计算。不使用验证时所有比特均为1（十六进制则全“FF”）。</li><li><strong>Length：</strong>占2个字节（无符号位），BGP消息总长度（包括报文头在内），以字节为单位。长度范围是19～4096。</li><li><strong>Type：</strong>占1个字节（无符号位），BGP消息的类型。Type有5个可选值，表示BGP报文头后面所接的5类报文（其中，前四种消息是在RFC4271中定义的，而Type5的消息则是在RFC2918中定义的）：
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="12.5%" id="mcps1.2.1.6.3.2.1.3.1.1">TYPE值</th>

<th class="cellrowborder" valign="top" width="87.5%" id="mcps1.2.1.6.3.2.1.3.1.2">报文类型</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.1.6.3.2.1.3.1.1 ">1</td>

<td class="cellrowborder" valign="top" width="87.5%" headers="mcps1.2.1.6.3.2.1.3.1.2 ">OPEN</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.1.6.3.2.1.3.1.1 ">2</td>

<td class="cellrowborder" valign="top" width="87.5%" headers="mcps1.2.1.6.3.2.1.3.1.2 ">UPDATE</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.1.6.3.2.1.3.1.1 ">3</td>

<td class="cellrowborder" valign="top" width="87.5%" headers="mcps1.2.1.6.3.2.1.3.1.2 ">NOTIFICATION</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.1.6.3.2.1.3.1.1 ">4</td>

<td class="cellrowborder" valign="top" width="87.5%" headers="mcps1.2.1.6.3.2.1.3.1.2 ">KEEPALIVE</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.1.6.3.2.1.3.1.1 ">5</td>

<td class="cellrowborder" valign="top" width="87.5%" headers="mcps1.2.1.6.3.2.1.3.1.2 ">REFRESH（RFC2918）</td>

</tr>

</tbody>

</table>
</div>
</li></ul>
</div>

<div class="section"><h4 class="sectiontitle">参考标准</h4>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" width="18%" id="mcps1.2.2.2.1.3.1.1">标准</th>

<th class="cellrowborder" valign="top" width="82%" id="mcps1.2.2.2.1.3.1.2">描述</th>

</tr>

</thead>

<tbody>
<tr>

<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.2.2.1.3.1.1 ">RFC 827</td>

<td class="cellrowborder" valign="top" width="82%" headers="mcps1.2.2.2.1.3.1.2 ">Exterior Gateway Protocol (EGP)</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.2.2.1.3.1.1 ">RFC 2918</td>

<td class="cellrowborder" valign="top" width="82%" headers="mcps1.2.2.2.1.3.1.2 ">Route Refresh Capability for BGP-4</td>

</tr>

<tr>

<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.2.2.1.3.1.1 ">RFC 4271</td>

<td class="cellrowborder" valign="top" width="82%" headers="mcps1.2.2.2.1.3.1.2 ">A Border Gateway Protocol 4 (BGP-4)</td>

</tr>

</tbody>

</table>
</div>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="bgp_message.html">BGP报文格式</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">本资料收集于互联网</div><div class="hwcopyright">2016 &copy</div></body>
</html>